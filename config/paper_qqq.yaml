# Paper Trading Configuration - QQQ Vertical Spread Strategy
# Optimized for LOW tier ($5,000 starting capital)

app:
  name: "Alpaca Options Bot - QQQ Paper Trading"
  log_level: "INFO"
  timezone: "America/New_York"
  data_dir: "./data"

# Alpaca API Configuration - Paper Trading
alpaca:
  paper: true  # PAPER TRADING MODE
  data_feed: "iex"
  base_url: null

# Trading Configuration
trading:
  enabled: true
  max_positions: 5
  max_concurrent_positions: 2  # Conservative for paper testing
  max_order_value: 2500
  trading_hours_only: true
  order_timeout_seconds: 30
  default_order_type: "limit"
  limit_price_buffer: 0.02
  min_buying_power_reserve: 0.25  # Keep 25% cash reserve

# Risk Management - Conservative for paper trading
risk:
  max_portfolio_delta: 50
  max_portfolio_gamma: 10
  max_portfolio_vega: 100
  min_portfolio_theta: -50

  max_drawdown_percent: 15
  daily_loss_limit: 250  # $250 daily loss limit

  max_single_position_percent: 20
  max_contracts_per_trade: 1  # Start with 1 contract

  min_days_to_expiry: 14
  max_days_to_expiry: 45
  min_open_interest: 100
  max_bid_ask_spread_percent: 5

# Strategy Configuration - Only Vertical Spread enabled
strategies:
  wheel:
    enabled: false
    allocation: 0.0

  iron_condor:
    enabled: false
    allocation: 0.0

  # Vertical Spread Strategy - PRIMARY STRATEGY
  # Optimized based on research: 20 delta, 30-45 DTE, profit/stop management
  vertical_spread:
    enabled: true
    allocation: 0.3
    capital_requirements:
      min_capital: 2000
      recommended_capital: 5000
      max_allocation_percent: 30
    config:
      underlyings:
        - "QQQ"  # Only QQQ for paper trading
      spread_width: 5
      delta_target: 0.20  # 20 delta = ~80% probability OTM
      min_credit: 30
      min_dte: 30  # Enter with 30+ DTE
      max_dte: 45
      close_dte: 21  # Close at 21 DTE to avoid gamma risk
      min_iv_rank: 30  # Only sell when IV is elevated
      max_spread_percent: 5.0
      min_open_interest: 100
      prefer_credit: true
      # RSI thresholds - widened for more opportunities
      rsi_oversold: 45
      rsi_overbought: 55
      # Profit/Loss management
      profit_target_pct: 0.50  # Close at 50% of max profit
      stop_loss_multiplier: 2.0  # Close at 2x credit received (loss)
      min_return_on_risk: 0.25  # Credit should be 1/4 of spread width

  cash_secured_put:
    enabled: false
    allocation: 0.0

  covered_call:
    enabled: false
    allocation: 0.0

# Backtesting Configuration (for reference)
backtesting:
  default_start_date: "2024-01-01"
  default_end_date: "2024-11-15"
  initial_capital: 5000

  execution:
    slippage_model: "percentage"
    slippage_value: 0.02
    commission_per_contract: 0.65

  data:
    underlying_timeframe: "1h"
    options_snapshot_interval: "15min"
    use_adjusted_prices: true
    cache_enabled: true
    cache_dir: "./data/historical"

# Terminal UI Configuration
ui:
  refresh_rate: 1.0
  show_greeks: true
  show_performance: true
  log_lines: 15
  theme: "default"

  panels:
    positions: true
    orders: true
    strategies: true
    greeks: true
    performance: true
    logs: true

# Logging Configuration
logging:
  console_level: "INFO"
  file_level: "DEBUG"
  log_file: "./data/logs/paper_trading.log"
  max_file_size_mb: 10
  backup_count: 5

# Notifications
notifications:
  enabled: false
